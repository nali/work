{"name":"Work","tagline":"","body":"## Confluence Feature development \r\n### Multi file type previewer\r\n### Aggregated notifications inbox\r\n### User onboarding experiments\r\n\r\n## Lenditt - a collaborative consumption experiment\r\nWe've crafted some handsome templates for you to use. Go ahead and continue to layouts to browse through them. You can easily go back to edit your page before publishing. After publishing your page, you can revisit the page generator and switch to another theme. Your Page content will be preserved if it remained markdown format.\r\n\r\n## Typespeed - a kitsch Star Wars themed typing game\r\n  (ns typewars.core\r\n      (:gen-class :main true)\r\n      (:require \r\n        [clojure.contrib.string :as st]\r\n        [clojure.java.io :as io])\r\n      (:use quil.core)\r\n    )\r\n\r\n    (import '(java.applet Applet)\r\n            '(java.io File)\r\n            '(java.net URL))\r\n\r\n    (defn rand-seek [x]\r\n      (nth x (rand-int (count x)))\r\n    )\r\n\r\n    (defn get-lines [wordfile]\r\n      \"Seek each word to be typed, from a file\"\r\n      (with-open [r (io/reader wordfile)]\r\n        (doall (line-seq r))))\r\n\r\n    (defn clean-word [s]\r\n      \"Given a string, lower-case words with whitespace and punctuation removed\"\r\n      (map #(.toLowerCase %) (filter #(not (.isEmpty %)) (seq (.split #\"[\\s\\W]+\" s)))))\r\n\r\n    (defn play-url [url-string]\r\n      (.play (Applet/newAudioClip (URL. url-string))))\r\n\r\n    (defn find-sound [file-name]\r\n      \"Tailors soundclip addresses for play-url\"\r\n      (let [absolute-name (.getAbsolutePath (File. file-name))]\r\n            (str \"file://\" absolute-name)\r\n      )\r\n    )\r\n\r\n    (defn get-star-wars-quote []\r\n      (let [quotes (list \"May the Force be with you\" \r\n                         \"I find your lack of faith disturbing\"\r\n                         \"Iâ€™ve got a very bad feeling about this\"\r\n                         \"Youâ€™re all clear, kid! Now letâ€™s blow this thing and go home!\"\r\n                         \"The Force is strong with this one\"\r\n                         \"What a piece of junk!\"\r\n                         \"Watch your mouth kid, or youâ€™ll find yourself floating home\"\r\n                         \"Arenâ€™t you a little short for a stormtrooper?\"\r\n                         \"You came in here and you didnâ€™t have a plan for getting out?\"\r\n                         \"Into the garbage chute, flyboy!\"\r\n                         \"I suggest a new strategy, R2. Let the wookiee win\"\r\n                         \"When I left you, I was but the learner, now I am the master\"\r\n                         \"These arenâ€™t the droids youâ€™re looking for\"\r\n                         \"I've always liked your shoes\")]\r\n        (rand-seek quotes)\r\n      )\r\n    )\r\n\r\n    (defn setup []\r\n      (let [funfont (create-font \"resources/ProFontWindows.ttf\" 30)\r\n            wordfile \"resources/intro.txt\"                          ; The file containing a newline separated word list\r\n            bgfile   \"resources/mainscreen.jpg\"       ; The background image\r\n            introfile \"resources/introscreen.jpg\"         ; The intro image\r\n            endfile  \"resources/endscreen.jpg\"  ; The image to be displayed at the end \r\n            forcebarfile \"resources/lightsbr.png\"]\r\n        (frame-rate 24)\r\n        (smooth)\r\n        (background 0)\r\n        (text-font funfont)\r\n        (no-fill)\r\n        (set-state! :score        (atom 0)\r\n                    :typed        (atom \"\")\r\n                    :game         (atom '())\r\n                    :words        (atom (get-lines wordfile))\r\n                    :missedwords  (atom 0)\r\n                    :ended        (atom -1)\r\n                    :bg           (load-image bgfile)\r\n                    :intro        (load-image introfile)\r\n                    :end          (load-image endfile)\r\n                    :forcebar     (load-image forcebarfile)\r\n                    :quotesw      (atom (get-star-wars-quote))\r\n                    :wordfile     wordfile\r\n        )\r\n      )\r\n    )\r\n\r\n    (defn make-str\r\n      \"Make a string from a sequence of characters\"\r\n      ([chars] (make-str chars \"\"))\r\n      ([chars result]\r\n        (if (zero? (count chars))\r\n          result\r\n          (recur (drop 1 chars) (str result (first chars)))\r\n        )\r\n      )\r\n    )\r\n\r\n    (defn is-in [n typed word]\r\n      (if (> n 0)\r\n        (if (= (take n word) (take-last n typed))\r\n          n\r\n          (is-in (- n 1) typed word)    \r\n        )\r\n        0\r\n      )\r\n    )\r\n\r\n    (defn drawword [x]\r\n      (let [typed (state :typed)\r\n            n     (is-in (count (x :word)) @typed (x :word))]\r\n        (fill 255 255 255)\r\n        (text (make-str (take n (x :word))) (x :posx)  (x :posy))\r\n        (fill 206 145 60)\r\n        (text (make-str (take-last (- (count (x :word)) n) (x :word))) (+ (x :posx) (* n 15)) (x :posy))\r\n      )\r\n    )\r\n\r\n    (defn updatepos [y]\r\n      (do (update-in y [:posx] #(+ % (:speed y))))\r\n    )\r\n\r\n    (defn get-ypos [] \r\n      (+ (rand-int (- (height) 150)) 75)\r\n    )\r\n\r\n    (defn get-speed []\r\n      (+ (rand-int 5) 2)\r\n    )\r\n\r\n    (defn end-game []\r\n      (let [ended   (state :ended)\r\n            quotesw (state :quotesw)]\r\n        (reset! ended 1)\r\n        (reset! quotesw (get-star-wars-quote))\r\n      )\r\n    )\r\n\r\n    (defn get-word []\r\n      (let [words   (state :words)]\r\n        (do\r\n          (reset! words (rest @words)) \r\n          (first (clean-word (first @words)))\r\n\r\n        )\r\n      )\r\n    )\r\n\r\n    (defn newitem []\r\n      (let [posx-list   (take 20 (range))\r\n            word        (get-word)]\r\n        (if (not= word nil)\r\n          {:word word\r\n          :posx (rand-seek posx-list)\r\n          :posy (get-ypos)\r\n          :speed (get-speed)}\r\n          (end-game)\r\n        )\r\n      )\r\n    )\r\n\r\n    (defn reset-game []\r\n      (let [game (state :game)\r\n            typed (state :typed)\r\n            missedwords (state :missedwords)\r\n            words (state :words)\r\n            score (state :score)]\r\n      (reset! game '())\r\n      (reset! missedwords 0)\r\n      (reset! words '())\r\n      (reset! typed \"\")\r\n      ;(reset! score 0)\r\n      )\r\n    )\r\n\r\n    (defn matchword [x]\r\n      (let [game    (state :game)\r\n            typed   (state :typed)\r\n            score   (state :score)\r\n            sounds  (map find-sound '(\"resources/lasrhit1.wav\" \"resources/lasrhit2.wav\" \"resources/lasrhit3.wav\" \"resources/lasrhit4.wav\"))]\r\n        (if (clojure.contrib.string/substring? (x :word) @typed);if a substring of what is typed is a word\r\n          (do (swap! score + (* (count (x :word)) (x :speed)))         \r\n              (reset! typed \"\")\r\n              (play-url (rand-seek sounds))\r\n              true)\r\n          false\r\n        )\r\n      )\r\n    )\r\n\r\n    (defn draw []\r\n      (let [game        (state :game)\r\n            score       (state :score)\r\n            words       (state :words)\r\n            numwords    (count @words)\r\n            gamelength  (count @game)\r\n            bg          (state :bg)\r\n            end         (state :end) \r\n            intro       (state :intro)\r\n            ended       (state :ended)\r\n            forcebar    (state :forcebar)\r\n            missedwords (state :missedwords)\r\n            quotesw     (state :quotesw)\r\n            ]\r\n\r\n          (if (= -1 @ended)\r\n            (background-image intro)\r\n            (do \r\n              (if (and (< gamelength 1) (= 1 @ended))\r\n                (do (background-image end)\r\n                    (text-size 40)\r\n                    (fill 212 210 56)\r\n                    (text-align :center)\r\n                    (text @quotesw 630 100)\r\n                    (text (str \"SCORE \" @score) 630 395)\r\n                    (text-align :left)\r\n                )\r\n\r\n              (if (or (> numwords 0) (> gamelength 0))\r\n                (do (background-image bg)\r\n                  (if (= @missedwords 10)\r\n                    (do\r\n                      (end-game)\r\n                      (reset-game)\r\n                    )\r\n                  )\r\n                  (let [life (* (/ @missedwords 10) 240) \r\n                        screencopy (get-pixel (- 400 life) 40 (+ 20 life) 43)]\r\n                    (set-image 30 40 forcebar)\r\n                    (set-image (- 400 life) 40 screencopy)\r\n                  )\r\n                  (fill 255 255 255)\r\n                  (text (str \"SCORE \" @score) 30 (- (height) 25))\r\n                  (doall (map drawword @game))\r\n                  (reset! game (map updatepos @game))\r\n                  (swap! missedwords + (count (filter #(> (% :posx) (width)) @game)))\r\n                  (reset! game (remove #(> (% :posx) (width)) @game))\r\n\r\n                  (if (> numwords 1)\r\n                    (if (= 0 (mod (frame-count) (+ 20 (rand-int 10))))\r\n                      (reset! game (concat @game (list (newitem))))\r\n                    )\r\n                  (end-game)\r\n                  )\r\n                  )\r\n                )\r\n              )\r\n            )\r\n          )\r\n      )\r\n    )\r\n\r\n\r\n    (defn key-press []\r\n      (let [typed (state :typed)\r\n            game (state :game)\r\n            letter (str (raw-key))\r\n            ended (state :ended)\r\n            words (state :words)\r\n            wordfile (state :wordfile)\r\n            missedwords (state :missedwords)]\r\n          (if (and (or (= -1 @ended) (= 1 @ended)) (= letter \" \"))\r\n            (do \r\n              (reset-game)\r\n              (reset! words (get-lines wordfile))\r\n              (reset! ended 0)\r\n              ;(play-url (find-sound \"resources/cantina.mid\"))\r\n              (text-size 30)\r\n            )  \r\n          (do  \r\n            (reset! typed (str @typed letter))\r\n            (reset! game (remove matchword @game))\r\n          )\r\n        )\r\n      )\r\n    )\r\n\r\n    (defsketch gen-art-3\r\n      :title \"TYPEWARS\"\r\n      :setup setup\r\n      :draw draw\r\n      :size [1260 630]\r\n      :key-typed key-press\r\n    )","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}